---
id: broadcast
sidebar_label: broadcast
title: broadcast
---

Desktop Agent bridging message exchange for a `broadcast()` API call on the [`DesktopAgent`](../../api/ref/DesktopAgent) or a [`Channel`](../../api/ref/Channel). Generated by API calls:

- [`fdc3.broadcast(context: Context): Promise<void>`](../../api/ref/DesktopAgent#broadcast)
- [`Channel.broadcast(context: Context): Promise<void>`](../../api/ref/Channel#broadcast)

:::caution

Broadcasts on a [`PrivateChannel`](../../api/ref/PrivateChannel) have a separate message exchange, see [`PrivateChannel.broadcast`](PrivateChannel.broadcast).

:::

[Message Exchange Type](../spec#individual-message-exchanges): **Request only**

E.g.

```javascript
fdc3.broadcast(contextObj);
```

or

```javascript
(await fdc3.getOrCreateChannel("myChannel")).broadcast(contextObj)
```

## Message exchange

```mermaid
sequenceDiagram
    box Desktop Agent A
    participant AA as App A
    participant DA as Desktop Agent A
    end
    participant DAB as Desktop Agent Bridge
    participant DB as Desktop Agent B
    participant DC as Desktop Agent C
    AA --) DA: fdc3.broadcast() / channel.broadcast()
    DA ->> DAB: broadcastRequest
    DAB ->> DB: broadcastRequest
    DAB ->> DC: broadcastRequest
```

## Request format

### Request message schemas

- [https://fdc3.finos.org/schemas/next/bridging/broadcastAgentRequest.schema.json](pathname:///schemas/next/bridging/broadcastAgentRequest.schema.json)
- [https://fdc3.finos.org/schemas/next/bridging/broadcastBridgeRequest.schema.json](pathname:///schemas/next/bridging/broadcastBridgeRequest.schema.json)

### Example

Outward message to the DAB:

```json
// agent-A -> DAB
{
    "type": "broadcastRequest",
    "payload": {
        "channelId": "myChannel",
        "context": { /*contextObj*/ }
    },
    "meta": {
        "requestUuid": "<requestUuid>",
        "timestamp": "2022-03-...",
        "source": {
            "appId": "agentA-app1",
            "instanceId": "c6ad5174-6f78-4582-8e96-728d93a4d7d7"
        }
    }
}
```

which it repeats on to agent-B AND agent-C with the `source.desktopAgent` metadata added.

```json
// DAB -> agent-B
// DAB -> agent-C
{
    "type": "broadcastRequest",
    "payload": {
        "channelId": "myChannel",
        "context": { /*contextObj*/}
    },
    "meta": {
        "requestUuid": "<requestUuid>",
        "timestamp": "2020-03-...",
        "source": {
            "appId": "agentA-app1",
            "instanceId": "c6ad5174-6f78-4582-8e96-728d93a4d7d7",
            "desktopAgent": "agent-A" //added by DAB
        }
    }
}
```
